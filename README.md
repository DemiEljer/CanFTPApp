# CanFTPApp
---
**CanFTPApp** - консольное приложения для запуска **клиента** или **сервера**, работающее на базе протокола [CANFileTransferProtocol](https://github.com/DemiEljer/CANFileTransferProtocol). Для сетевого взаимодействия используется пакет [SocketCAN](https://docs.kernel.org/networking/can.html). Приложение было написано для запуска на **ОС Linux**. 

---
### Зависимости

- [CANFileTransferProtocol](https://github.com/DemiEljer/CANFileTransferProtocol) - протокол, реализующий передачу файлов.
- [yaml-cpp](https://github.com/jbeder/yaml-cpp) - для чтения конфигураций клиента и сервера.

---
## Сборка приложения

Перед установкой приложения необходимо установить пакет ""

Проект создан для сборки с помощью CMake.

```bash

git clone https://github.com/DemiEljer/CanFTPApp.git
cd ./CanFTPApp
git submodule init
git submodule update
mkdir build
cd ./build
cmake ..
cmake --build .
make

```

---

## Запуск приложения

Приложения может работать в двух режимах: либо в качестве **клиента**, либо в качестве **сервера**. При запуске могут быть указаны файлы конфигурации, примеры которых расположены в директории **./configs**.

Аргументы запуска приложения:

```

... -h|--help                       : вывод справочной инофрмации по запуску приложения
... <interface> <mode> [configFile] : запуск приложения в одном из режимов
    - <interface>                   : имя CAN-интерфейса
    - <mode>                        : -c|--client (запуск клиента) или -s|--server (запуск сервера)
    - [configFile]                  : путь к файлу конфигурации

```

Примеры запуска приложения

```
    ./CanFTPApp -h
    sudo ./CanFTPApp vcan0 -s
    sudo ./CanFTPApp vcan0 --client ./clientConfiguration.yaml
```

## Команды управления запущенным приложением

Управления активным приложением осуществялется путем ввода команд управления.

### Режим-клиент

|Команда|Описание|
|-------|--------|
|help|Вывести список доступных команд|
|info|Вывести информацию о клиенте|
|exit|Завершить работу приложения|

### Режим-сервер

|Команда|Описание|
|-------|--------|
|help|Вывести список доступных команд|
|info|Вывести информацию о сервере|
|ping|Начать процесс поиска клиентов без блокировки их логики|
|lock|Начать процесс поиска клиентов с блокировкой их логики|
|release|Начать процесс освобождения логики клиентов|
|stop|Остановка процессов поиска или освобождения клиентов|
|clients|Вывести список обнаруженных клиентов|
|sessions|Вывести список активных сессий|
|session|Создать новую сессию передачи файла|
|exit|Завершить работу приложения|
